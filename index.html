<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ساخت تیم فوتبال</title>
<link href="https://cdn.fontcdn.ir/Font/Persian/Shabnam/Shabnam.css" rel="stylesheet">
<style>
html, body {
  font-family: 'Shabnam', sans-serif;
  background-color: #063f33;
  color: #f2f2f2;
  margin: 0;
  padding: 0;
  overflow: hidden;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* صفحه ساخت تیم */
.create-team {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 25px;
  width: 90%;
  max-width: 350px;
}

.logo-container {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #19d87c;
  font-size: 14px;
  cursor: pointer;
  transition: 0.2s;
  overflow: hidden;
}
.logo-container:hover { background-color: rgba(25, 216, 124, 0.15); }
.logo-container img { width: 100%; height: 100%; object-fit: cover; }

input[type="file"] { display: none; }
input[type="text"] {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 8px;
  outline: none;
  text-align: center;
  font-size: 15px;
  color: #f2f2f2;
  background-color: rgba(255, 255, 255, 0.1);
}
.btn {
  width: 100%;
  background: #19d87c;
  color: #063f33;
  border: none;
  padding: 12px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  font-weight: bold;
  transition: 0.3s;
}
.btn:hover { background: #16c06e; }

/* پاپ‌آپ */
.popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(3px);
}
.popup-content {
  background-color: #074c3c;
  padding: 25px;
  border-radius: 12px;
  text-align: center;
  width: 80%;
  max-width: 280px;
}
.popup-content p { margin-bottom: 15px; font-size: 15px; }
.close-btn {
  background: #19d87c;
  color: #063f33;
  border: none;
  padding: 10px 40px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
}

/* صفحه اصلی */
.main-page {
  display: none;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background-color: #063f33;
  position: relative;
}

.team-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.15);
}
.team-info {
  display: flex;
  align-items: center;
  gap: 12px;
}
.team-header img {
  width: 55px;
  height: 55px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #19d87c;
  cursor: pointer;
}
.team-header h2 {
  font-size: 18px;
  margin: 0;
  color: #f2f2f2;
  font-weight: 500;
}
.team-balance {
  font-size: 15px;
  color: #cfcfcf;
}

/* کارت بازی بعدی */
.next-match-card {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.08);
  border-radius: 18px;
  padding: 20px;
  width: 65%;
  max-width: 360px;
  min-height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  backdrop-filter: blur(8px);
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
}
.next-match-card .mini-card {
  position: absolute;
  top: -15px;
  right: 20px;
  background: #fff;
  color: #063f33;
  padding: 5px 15px;
  font-size: 13px;
  font-weight: bold;
  border-radius: 10px;
}
.next-match-content {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
}

/* کارت پایین صفحه */
.bottom-card {
  position: absolute;
  bottom: 50px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 100px);
  background: rgba(0,0,0,0.6);
  border-radius: 12px;
  padding: 14px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 14px;
  transition: transform 0.2s ease;
}
.bottom-card button {
  background: #2196f3;
  border: none;
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  font-weight: bold;
  transition: transform 0.2s ease;
}
.bottom-card button:hover { background: #1976d2; }
</style>
</head>
<body>

<!-- صفحه ساخت تیم -->
<div class="create-team">
  <label for="team-logo" class="logo-container" id="logoPreview">افزودن لوگو</label>
  <input type="file" id="team-logo" accept="image/*">
  <input type="text" id="team-name" placeholder="نام تیم را وارد کنید">
  <button class="btn" id="create-btn">تأیید ساخت تیم</button>
</div>

<!-- پاپ‌آپ -->
<div class="popup" id="popup">
  <div class="popup-content">
    <p>نام تیم خود را وارد نمایید.</p>
    <button class="close-btn" id="close-popup">بازگشت</button>
  </div>
</div>

<!-- صفحه اصلی -->
<div class="main-page" id="main-page">
  <div class="team-header">
    <div class="team-info">
      <img id="header-logo" src="" alt="لوگو تیم">
      <h2 id="header-name"></h2>
    </div>
    <div class="team-balance" id="team-balance">موجودی تیم: ۵۰,۰۰۰ سکه</div>
  </div>

  <div class="next-match-card">
    <div class="mini-card">بازی بعدی</div>
    <div id="match-content">
      بازی بعدی‌ای وجود ندارد.
    </div>
  </div>

  <div class="bottom-card">
    <span>با عضویت در کانال روبیکا از اخبار ، جشنواره ها و دیگر موارد باخبر شوید .</span>
    <button>عضویت</button>
  </div>
</div>

<script>
const logoInput = document.getElementById("team-logo");
const logoPreview = document.getElementById("logoPreview");
const headerLogo = document.getElementById("header-logo");
const teamNameInput = document.getElementById("team-name");
const createBtn = document.getElementById("create-btn");
const popup = document.getElementById("popup");
const closePopup = document.getElementById("close-popup");
const mainPage = document.getElementById("main-page");
const createTeamPage = document.querySelector(".create-team");
const headerName = document.getElementById("header-name");
const teamBalance = document.getElementById("team-balance");
const matchContent = document.getElementById("match-content");
const bottomCard = document.querySelector(".bottom-card");
const bottomBtn = bottomCard.querySelector("button");

let teamData = JSON.parse(localStorage.getItem("teamData")) || null;

function createDefaultLogo(){
  const svg = `<svg width="55" height="55" xmlns="http://www.w3.org/2000/svg">
    <rect width="55" height="55" rx="50%" fill="#0a5c46"/>
    <text x="50%" y="55%" font-size="14" fill="white" font-family="Shabnam" text-anchor="middle" alignment-baseline="middle">Logo</text>
  </svg>`;
  return "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(svg)));
}

if(teamData) showMainPage();

// انتخاب لوگو
logoPreview.addEventListener("click", () => logoInput.click());
headerLogo.addEventListener("click", () => logoInput.click());

logoInput.addEventListener("change", function() {
  const file = this.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(e){
      const logoSrc = e.target.result;
      logoPreview.innerHTML = `<img src="${logoSrc}" alt="لوگو تیم">`;
      headerLogo.src = logoSrc;
      if(teamData){
        teamData.logo = logoSrc;
        saveTeamData();
      }
    };
    reader.readAsDataURL(file);
  }
});

// ساخت تیم
createBtn.addEventListener("click", () => {
  const teamName = teamNameInput.value.trim();
  if(teamName === ""){
    popup.style.display = "flex";
    return;
  }
  teamData = {
    name: teamName,
    logo: createDefaultLogo(),
    balance: 50000,
    match: null
  };
  saveTeamData();
  showMainPage();
});

closePopup.addEventListener("click", () => { popup.style.display = "none"; });

function saveTeamData(){ localStorage.setItem("teamData", JSON.stringify(teamData)); }

function showMainPage(){
  createTeamPage.style.display = "none";
  mainPage.style.display = "flex";
  headerName.textContent = teamData.name;
  headerLogo.src = teamData.logo || createDefaultLogo();
  teamBalance.textContent = "موجودی تیم: " + teamData.balance.toLocaleString() + " سکه";

  if(teamData.match){
    const m = teamData.match;
    matchContent.innerHTML = `
      <div class="next-match-content">
        <span>${m.guest}</span>
        <span>${m.datetime}</span>
        <span>${m.host}</span>
      </div>
    `;
  } else {
    matchContent.textContent = "بازی بعدی‌ای وجود ندارد.";
  }
}

// انیمیشن کارت پایین صفحه
bottomBtn.addEventListener("click", () => {
  bottomCard.style.transform = "translate(-50%, -10px)";
  setTimeout(() => { bottomCard.style.transform = "translateX(-50%)"; }, 200);
  window.open('https://rubika.ir/Football33_Game', '_blank');
});
</script>

</body>
</html>
